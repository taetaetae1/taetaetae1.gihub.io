
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="꿈꾸는 태태태의 공간">
    <title>네트워크 모니터링이 궁금할땐 ? Packetbeat ! - 꿈꾸는 태태태의 공간</title>
    <meta name="author" content="taetaetae">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"taetaetae","sameAs":["https://facebook.com/taetaetae0","https://www.linkedin.com/in/태관-권-517825129/","mailto:taetaetae_@naver.com"],"image":"profile.jpg"},"articleBody":"모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다. 이를 통해 사용자들이 어떤 url을 많이 호출하고, 어떤 user-agent형태를 사용하는지 알게 되면 그에 따라 서비스 전략을 변경할수도 있고 악의적으로 공격적인 요청에 대해 웹서버단에서 차단을 할 수 있기 때문이다.이렇게 inbound 트래픽(외부에서 들어오는 요청)에 대해서는 엑세스 로그를 잘 분석하면 기존의 웹 어플리케이션과는 전혀 무관하게 모니터링이 가능하지만 반대로 outbund 트래픽(외부로 나가는 요청)에 대해서는 어떤식으로 모니터링을 할 수 있을까? \n월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...이미지 출처 : https://www.app24moa.com/feedDetail/2/2002월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...이미지 출처 : https://www.app24moa.com/feedDetail/2/2002\n예컨데, 날씨 서비스를 하기 위해 외부에서 서울날씨라는 페이지를 조회했을 경우 기상청 API에서 넘겨받은 데이터를 가공하여 보여준다고 가정해보자. 이때 기상청에서 제공해주는 특정 API중에 어느 하나가 늦게 응답이 온다거나, 특정시간대에 에러응답을 받을경우 과연 이를 어떤식으로 모니터링 할수 있을까? 어플리케이션 코드에 모니터링을 위한 코드를 추가할 것인가? 혹 하나의 서버에서 A모듈은 java로, B모듈은 python으로 개발되었을 경우 각각 모듈마다 모니터링을 위한 코드를 추가하는 식으로 하다보면 비지니스 로직을 방해하거나 오히려 추가한 코드 또한 관리해야 하는 배보다 배꼽이 더 커져버릴 상황도 생길수 있다.어플리케이션의 비지니스 로직과는 무관하게 서버 자체에서 외부로 나가는 네트워크 트래픽에 대해 모니터링을 할 수 있는 가벼우면서도 심플한 모듈을 찾고 싶었다. 어플리케이션의 개발언어가 무엇이든 상관없이 별도의 에이전트 형식으로 띄워두기만 하면 네트워크 트래픽을 수집 및 분석, 나아가서는 모니터링까지 할수있는… 그래서 찾다보니 역시나 이러한 고민을 누군가는 하고 있었고 오픈소스까지 되어있는 Elastic Stack 의 Beat중 Packetbeat라는 데이터 수집모듈을 알게 되었다.\n\n역시 내가 하고있는 고민은 이미 누군가 했던 고민들… 이러한 고민에 대해 해결하는 방법을 보다 빨리 찾는게 경쟁력이 될텐데…\n\n이번 포스팅에서는 Packetbeat 에 대해 간단히 알아보고 이를 활용하여 outbound 트래픽에 대해 모니터링을 해보며 어떤식으로 활용할 수 있는지에 대해 알아보고자 한다.\n# Packetbeat ?ElasticStack 중에 데이터 수집기 플랫폼인 Beats중 네트워크 트래픽 데이터에 대해 수집을 할 수 있는 데이터 수집기를 제공하고 있다. pcap라이브러리를 이용하여 서버의 네트워크 레벨에서 데이터를 수집 및 분석한 후 외부로(Elasticsearch, Logstash, Kafka 등) 전송해주는 경량 네트워크 패킷 분석기라고 공식 홈페이지에 소개되고 있다.몇번 사용해보면서 느낀 장점들은 다음과 같다.\n\n설치 및 실행이 너무 간단하다.\n설정값 튜닝을 통해 간단하지만, 그러한 간단함에 비해서 너무 강력한 수집이 가능하다.\n앞서 이야기 했던 어플리케이션 코드와는 전혀 무관하게 작동한다.\n\n# 무엇을 해볼것인가?! (a.k.a. 목표)필자가 운영하는 Daily-DevBlog 라는 서비스가 있다. (갑분 서비스 홍보) 여러 사람들의 rss를 조회하고 파싱해서 메일을 보내주는 서비스 인데, packetbeat 사용 예시를 들기위해 조금 변형하여 모든 rss를 접근하고 가장 최신글의 제목을 출력하는 아주 간단한 python 스크립트로 outbound 트래픽을 발생시켜 보고자 한다.그리고 packetbeat 를 이용하여 외부로 호출되는 트래픽을 수집하고 Elasticsearch 로 인덱싱 하여 최종적으로는 어느 rss의 속도가 가장 느린지 실행되는 python코드와는 전혀 관련없이 모니터링 해보고자 한다.python 코드는 다음과 같다.\n\n참고로 필자는 awesome-devblog의 운영자분께 해당 데이터 사용에 대해 허락을 받은 상태이다.\n\n1234567891011121314151617import requests, yaml, feedparserblog_info_list_yml_url = 'https://raw.githubusercontent.com/sarojaba/awesome-devblog/master/db.yml'blog_info_list_yml = requests.get(url=blog_info_list_yml_url).textblog_info_yaml_parse_list = yaml.load(blog_info_list_yml)for blog_info in blog_info_yaml_parse_list :    if 'rss' not in blog_info.keys() or not blog_info['rss']:        continue    rss_url = blog_info['rss']    try :        parse_feed = feedparser.parse(rss_url)    except :        continue    parse_feed_data =  parse_feed.entries[0]    print(blog_info['name'], '|', parse_feed_data['title'], '|', parse_feed_data['link'])\n위 코드를 실행하면 아래처럼 아주 간단하게 블로그 주인의 이름과 최신글 제목, 링크가 출력이 된다.\n그러고 보니 너무 오랜만에 글쓰네... (숙연)그러고 보니 너무 오랜만에 글쓰네... (숙연)\n# 백문이 불여일견? 백견이 불여일타!언제 어디서부터 유래된 이야기 인지는 모르지만 “백번 듣는것이 한번 보는것보다 못하고, 백번 보는것이 한번 타자 치는것보다 못하다” 라는 개발버전 속담이 있다. 자, 위에서 정의한 목표를 이루기 위해 실제로 각종 모듈을 설치해 보도록 하자! ( 필자가 테스트 했던 서버의 환경은 CentOS 7.4 64Bit 이니 참고 )\n\nElasticsearch  이왕 설치하는거 가장 최신버전인 7.3.1을 설치해보자! (버전업이 빨라도 너~무 빨라…)\n  12345678910111213// 다운을 받고wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.3.1-linux-x86_64.tar.gz// 압축을 푼다음tar -zxvf elasticsearch-7.3.1-linux-x86_64.tar.gzcd elasticsearch-7.3.1/conf// 각종 설정후vi elasticsearch.yml\tnode.name: node-1\tnetwork.host: 0.0.0.0\tdiscovery.seed_hosts: [&quot;localhost&quot;]\tcluster.initial_master_nodes: [&quot;node-1&quot;]// 실행bin/elasticsearch\n  http://server-url:9200접근시 아래처럼 나오면 설치 성공\n  12345678910&#123;\t\"name\": \"node-1\",\t\"cluster_name\": \"elasticsearch\",\t\"cluster_uuid\": \"---\",\t\"version\": &#123;\t\t\"number\": \"7.3.1\",\t\t~~~\t&#125;,\t\"tagline\": \"You Know, for Search\"&#125;\n\nKibana\n  1234567891011// 다운을 받고 wget https://artifacts.elastic.co/downloads/kibana/kibana-7.3.1-linux-x86_64.tar.gz// 압축을 푼 다음tar -zxvf kibana-7.3.1-linux-x86_64.tar.gzcd kibana-7.3.1-linux-x86_64/config   // 각종 설정후   vi kibana.yml\tserver.host: &quot;~.~.~.~&quot;\telasticsearch.hosts: [&quot;http://~.~.~.~:9200&quot;]// 실행bin/kibana\n  http://server-url:5601접근시 키바나 화면이 나오면 설치 성공\n\nPacketbeat\n  1234567891011// 다운을 받고wget https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-7.3.1-linux-x86_64.tar.gz// 압축을 푼 다음tar -zxvf packetbeat-7.3.1-linux-x86_64.tar.gz// 각종 설정후 실행 (root 권한으로 실행해야 함)sudo chown root:root packetbeat.ymlsudo vi packetbeat.yml\toutput.elasticsearch:\t  # Array of hosts to connect to.\t  hosts: [&quot;~.~.~.~:9200&quot;]sudo ./packetbeat -e -c packetbeat.yml\n  이렇게 하고나서 키바나에 가보면 아래처럼 Packetbeat 인덱스 패턴을 만들수 있고 수집이 되고있는것 까지 확인 가능하다.\n  데이터가 엄~청 다양하고 많이 수집된다.데이터가 엄~청 다양하고 많이 수집된다.\n\n\n# 무엇을 모니터링 할 수 있을까?이제 각종 구성은 했으니 처음에 목표한 어느 rss가 가장 느린가를 체크해 볼 시간이다. python 스크립트를 돌리면 packetbeat 에 의해 네트워크 트래픽이 수집~분석~Elasticsearch에 인덱싱이 되고 이를 키바나의 비쥬얼라이즈를 통해 적절하게 만들어보면 아래처럼 너무나도 간단하게 어느 rss의 응답속도가 가장 느린지 확인할 수 있다. event.duration 필드는 기본적으로 nano second 이다보니 아래 그림에서는 2.6초가 가장 오래걸린 rss url 이라 볼 수 있다.보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)\n한가지 더, packetbeat를 설치하고 기본 설정으로 실행하게 되면 불필요한(outbound 트래픽만을 수집하겠다던 목표와는 무관한) 데이터들도 수집되다보니 아무래도 cpu에 불필요한 부하가 발생할수 있고(아무래도 모든 네트워크 트래픽을 트래킹 하고 분석해야하니…) Elasticsearch 에도 불필요한 데이터가 인덱싱 되곤 한다. 그래서 지금의 Packetbeat 뿐만 아니라 오픈소스를 사용할 경우엔 설정값들을 정확히 알고 목적에 맞는 커스터마이징은 필수인듯 하다. 필자는 http의 outbound 트래픽만을 보고 싶었기 때문에 아래처럼 packetbeat 설정을 하고 다시 실행 해보면 Elasticsearch 에 수집되는 도큐먼트 사이즈가 확연하게 차이나는 것을 확인할 수 있다.123456789packetbeat.protocols: # 아래 2개 이외에는 전부 주석처리- type: http  ports: [80] # 80 port 의 http를 수집하겠다.- type: tls  ports:     - 443   # 443 의 tls를 수집하겠다.processors:  - drop_event.when.equals.network.direction : &quot;inbound&quot; # inbound는 수집하지 않겠다.\n좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태\n사실 위 설정값은 페이스북 한국 Elasticsearch 유저그룹에 문의해서 알게된 내용이다. 역시 커뮤니티 파워, 집단지성의 힘을 다시한번 느낄 수 있었다. (모르면 물어보자! + 문제에 대해 좀더 잘 검색하도록 노력하자!)\n# 마치며Packetbeat 을 사용하면서 가장 좋았던 점은 기존 로직과는 전혀 무관하게 작동하는 점이 가장 좋았다. 이러한 점은 어느 상황에서도 서비스 코드 디펜던시가 없어 자유롭게 활용이 가능하다는 뜻으로 해석을 해보곤 한다.마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4필자는 최근 운영환경에도 packetbeat를 적용해서 outbound 트래픽을 모니터링 하고 문제가 있는 엔드포인트에 대해 자동으로 점검을 하는 시스템을 만들려고 하고 있는데, 네트워크 패킷을 전부 까보며(?) 아무래도 cpu 성능에 지장을 줄수밖에 없는 오픈소스 모듈이다보니 다양한 테스트를 통해 서비스 운영에 영향이 없도록 설정값들을 튜닝해 가며 적용해봐야 할 것 같다. (무작정 좋다고 적용하다 오히려 큰 화를 부를 수 있다…)\n내가 맛있어 하는 음식이 남들도 맛있으리란 법 없듯, 소개팅에 나가기전 준비한 멘트가 전부 먹히리라는 법 없듯…모든 상황에는 튜닝은 필수다. 그 튜닝을 얼마나 잘, 그리고 센스있게 하냐가 포인트!\n","dateCreated":"2019-09-08T18:11:34+09:00","dateModified":"2020-04-23T13:41:36+09:00","datePublished":"2019-09-08T18:11:34+09:00","description":"모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다.","headline":"네트워크 모니터링이 궁금할땐 ? Packetbeat !","image":["packetbeat_rgb.png"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/"},"publisher":{"@type":"Organization","name":"taetaetae","sameAs":["https://facebook.com/taetaetae0","https://www.linkedin.com/in/태관-권-517825129/","mailto:taetaetae_@naver.com"],"image":"profile.jpg","logo":{"@type":"ImageObject","url":"profile.jpg"}},"url":"https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/","keywords":"packetbeat, network","thumbnailUrl":"packetbeat_rgb.png"}</script>
    <meta name="description" content="모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다.">
<meta name="keywords" content="packetbeat,network">
<meta property="og:type" content="blog">
<meta property="og:title" content="네트워크 모니터링이 궁금할땐 ? Packetbeat !">
<meta property="og:url" content="https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/index.html">
<meta property="og:site_name" content="꿈꾸는 태태태의 공간">
<meta property="og:description" content="모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다.">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-04-23T04:41:36.808Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="네트워크 모니터링이 궁금할땐 ? Packetbeat !">
<meta name="twitter:description" content="모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다.">
<meta name="twitter:image" content="https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/passbook.jpg">
    
    
        
    
    
    
        <meta property="og:image" content="https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/packetbeat_rgb.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/packetbeat_rgb.png" />
    
    
    
        <meta property="og:image" content="https://taetaetae.github.io/assets/images/profile.jpg"/>
    

    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-86432198-1', 'auto');
        ga('send', 'pageview');
    </script>


    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-5788330009690816",
  enable_page_level_ads: true
  });
</script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">꿈꾸는 태태태의 공간</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">taetaetae</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Programmer</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/taetaetae0" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/in/태관-권-517825129/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:taetaetae_@naver.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>    
    <ins class="adsbygoogle"
   style="display:inline-block;max-width:250px;width:100%;max-height:380px;height:100%"
   data-ad-client="ca-pub-5788330009690816">
</ins>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    <div class="main-content-wrap">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5788330009690816"
     data-ad-slot="9180895229"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
    </div>
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            네트워크 모니터링이 궁금할땐 ? Packetbeat !
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-09-08T18:11:34+09:00">
	
		    Sep 08, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/tech/">tech</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>모니터링은 서비스 로직 개발 만큼 한번씩 고민해보고 경험해 봤을 중요한 영역이라 할 수 있다. 그중 웹서버에서 제공해주는 엑세스 로그는 운영하고 있는 웹서비스에 대해 여러가지 측면에서 분석할 수 있는 가장 강력한 아이템 중에 하나라고 생각한다. <a id="more"></a>이를 통해 사용자들이 어떤 url을 많이 호출하고, 어떤 user-agent형태를 사용하는지 알게 되면 그에 따라 서비스 전략을 변경할수도 있고 악의적으로 공격적인 요청에 대해 웹서버단에서 차단을 할 수 있기 때문이다.<br>이렇게 <code>inbound 트래픽(외부에서 들어오는 요청)</code>에 대해서는 엑세스 로그를 잘 분석하면 기존의 웹 어플리케이션과는 전혀 무관하게 모니터링이 가능하지만 반대로 <code>outbund 트래픽(외부로 나가는 요청)</code>에 대해서는 어떤식으로 모니터링을 할 수 있을까? </p>
<div class="figure center" style="width:;"><a class="fancybox" href="passbook.jpg" title="월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...<br>이미지 출처 : https://www.app24moa.com/feedDetail/2/2002" data-caption="월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...<br>이미지 출처 : https://www.app24moa.com/feedDetail/2/2002" data-fancybox="default"><img class="fig-img" src="passbook.jpg" alt="월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...<br>이미지 출처 : https://www.app24moa.com/feedDetail/2/2002"><span class="image-caption">월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...<br>이미지 출처 : https://www.app24moa.com/feedDetail/2/2002</span></a><span class="caption">월급통장의 inbound 트래픽보다 outbound 트래픽이 너무 많은 요즘...<br>이미지 출처 : https://www.app24moa.com/feedDetail/2/2002</span></div>
<p>예컨데, 날씨 서비스를 하기 위해 외부에서 <code>서울날씨</code>라는 페이지를 조회했을 경우 기상청 API에서 넘겨받은 데이터를 가공하여 보여준다고 가정해보자. 이때 기상청에서 제공해주는 특정 API중에 어느 하나가 늦게 응답이 온다거나, 특정시간대에 에러응답을 받을경우 과연 이를 어떤식으로 모니터링 할수 있을까? 어플리케이션 코드에 <code>모니터링을 위한 코드</code>를 추가할 것인가? 혹 하나의 서버에서 A모듈은 java로, B모듈은 python으로 개발되었을 경우 각각 모듈마다 모니터링을 위한 코드를 추가하는 식으로 하다보면 비지니스 로직을 방해하거나 오히려 추가한 코드 또한 관리해야 하는 배보다 배꼽이 더 커져버릴 상황도 생길수 있다.<br>어플리케이션의 비지니스 로직과는 무관하게 서버 자체에서 외부로 나가는 네트워크 트래픽에 대해 모니터링을 할 수 있는 <code>가벼우면서도 심플한 모듈</code>을 찾고 싶었다. 어플리케이션의 개발언어가 무엇이든 상관없이 별도의 에이전트 형식으로 띄워두기만 하면 네트워크 트래픽을 수집 및 분석, 나아가서는 모니터링까지 할수있는… 그래서 찾다보니 역시나 이러한 고민을 누군가는 하고 있었고 오픈소스까지 되어있는 Elastic Stack 의 Beat중 <code>Packetbeat</code>라는 데이터 수집모듈을 알게 되었다.</p>
<blockquote>
<p>역시 내가 하고있는 고민은 이미 누군가 했던 고민들… 이러한 고민에 대해 해결하는 방법을 보다 빨리 찾는게 경쟁력이 될텐데…</p>
</blockquote>
<p>이번 포스팅에서는 Packetbeat 에 대해 간단히 알아보고 이를 활용하여 outbound 트래픽에 대해 모니터링을 해보며 어떤식으로 활용할 수 있는지에 대해 알아보고자 한다.</p>
<h3 id="Packetbeat"><a href="#Packetbeat" class="headerlink" title="# Packetbeat ?"></a># Packetbeat ?</h3><p>ElasticStack 중에 데이터 수집기 플랫폼인 <code>Beats</code>중 네트워크 트래픽 데이터에 대해 수집을 할 수 있는 데이터 수집기를 제공하고 있다. <a href="https://ko.wikipedia.org/wiki/Pcap" target="_blank" rel="noopener">pcap</a>라이브러리를 이용하여 서버의 네트워크 레벨에서 데이터를 수집 및 분석한 후 외부로(Elasticsearch, Logstash, Kafka 등) 전송해주는 <code>경량 네트워크 패킷 분석기</code>라고 <a href="https://www.elastic.co/kr/products/beats/packetbeat" target="_blank" rel="noopener">공식 홈페이지</a>에 소개되고 있다.<br>몇번 사용해보면서 느낀 장점들은 다음과 같다.</p>
<ul>
<li>설치 및 실행이 너무 간단하다.</li>
<li>설정값 튜닝을 통해 간단하지만, 그러한 간단함에 비해서 너무 강력한 수집이 가능하다.</li>
<li>앞서 이야기 했던 어플리케이션 코드와는 전혀 무관하게 작동한다.</li>
</ul>
<h3 id="무엇을-해볼것인가-a-k-a-목표"><a href="#무엇을-해볼것인가-a-k-a-목표" class="headerlink" title="# 무엇을 해볼것인가?! (a.k.a. 목표)"></a># 무엇을 해볼것인가?! (a.k.a. 목표)</h3><p>필자가 운영하는 <a href="http://daily-devblog.com" target="_blank" rel="noopener">Daily-DevBlog</a> 라는 서비스가 있다. <del>(갑분 서비스 홍보)</del> 여러 사람들의 rss를 조회하고 파싱해서 메일을 보내주는 서비스 인데, packetbeat 사용 예시를 들기위해 조금 변형하여 모든 rss를 접근하고 가장 최신글의 제목을 출력하는 아주 간단한 python 스크립트로 outbound 트래픽을 발생시켜 보고자 한다.<br>그리고 packetbeat 를 이용하여 외부로 호출되는 트래픽을 수집하고 Elasticsearch 로 인덱싱 하여 최종적으로는 어느 rss의 속도가 가장 느린지 실행되는 python코드와는 전혀 관련없이 모니터링 해보고자 한다.<br>python 코드는 다음과 같다.</p>
<blockquote>
<p>참고로 필자는 <code>awesome-devblog</code>의 운영자분께 해당 데이터 사용에 대해 허락을 받은 상태이다.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests, yaml, feedparser</span><br><span class="line"></span><br><span class="line">blog_info_list_yml_url = <span class="string">'https://raw.githubusercontent.com/sarojaba/awesome-devblog/master/db.yml'</span></span><br><span class="line">blog_info_list_yml = requests.get(url=blog_info_list_yml_url).text</span><br><span class="line">blog_info_yaml_parse_list = yaml.load(blog_info_list_yml)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> blog_info <span class="keyword">in</span> blog_info_yaml_parse_list :</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'rss'</span> <span class="keyword">not</span> <span class="keyword">in</span> blog_info.keys() <span class="keyword">or</span> <span class="keyword">not</span> blog_info[<span class="string">'rss'</span>]:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    rss_url = blog_info[<span class="string">'rss'</span>]</span><br><span class="line">    <span class="keyword">try</span> :</span><br><span class="line">        parse_feed = feedparser.parse(rss_url)</span><br><span class="line">    <span class="keyword">except</span> :</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    parse_feed_data =  parse_feed.entries[<span class="number">0</span>]</span><br><span class="line">    print(blog_info[<span class="string">'name'</span>], <span class="string">'|'</span>, parse_feed_data[<span class="string">'title'</span>], <span class="string">'|'</span>, parse_feed_data[<span class="string">'link'</span>])</span><br></pre></td></tr></table></figure>
<p>위 코드를 실행하면 아래처럼 아주 간단하게 <code>블로그 주인의 이름</code>과 <code>최신글 제목</code>, <code>링크</code>가 출력이 된다.</p>
<div class="figure center" style="width:;"><a class="fancybox" href="rss_python_script.jpg" title="그러고 보니 너무 오랜만에 글쓰네... (숙연)" data-caption="그러고 보니 너무 오랜만에 글쓰네... (숙연)" data-fancybox="default"><img class="fig-img" src="rss_python_script.jpg" alt="그러고 보니 너무 오랜만에 글쓰네... (숙연)"><span class="image-caption">그러고 보니 너무 오랜만에 글쓰네... (숙연)</span></a><span class="caption">그러고 보니 너무 오랜만에 글쓰네... (숙연)</span></div>
<h3 id="백문이-불여일견-백견이-불여일타"><a href="#백문이-불여일견-백견이-불여일타" class="headerlink" title="# 백문이 불여일견? 백견이 불여일타!"></a># 백문이 불여일견? 백견이 불여일타!</h3><p>언제 어디서부터 유래된 이야기 인지는 모르지만 “백번 듣는것이 한번 보는것보다 못하고, 백번 보는것이 한번 타자 치는것보다 못하다” 라는 <code>개발버전</code> 속담이 있다. 자, 위에서 정의한 목표를 이루기 위해 실제로 각종 모듈을 설치해 보도록 하자! ( 필자가 테스트 했던 서버의 환경은 CentOS 7.4 64Bit 이니 참고 )</p>
<ul>
<li><p>Elasticsearch<br>  이왕 설치하는거 가장 최신버전인 7.3.1을 설치해보자! (버전업이 빨라도 너~무 빨라…)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 다운을 받고</span><br><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">// 압축을 푼다음</span><br><span class="line">tar -zxvf elasticsearch-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">cd elasticsearch-7.3.1/conf</span><br><span class="line">// 각종 설정후</span><br><span class="line">vi elasticsearch.yml</span><br><span class="line">	node.name: node-1</span><br><span class="line">	network.host: 0.0.0.0</span><br><span class="line">	discovery.seed_hosts: [&quot;localhost&quot;]</span><br><span class="line">	cluster.initial_master_nodes: [&quot;node-1&quot;]</span><br><span class="line">// 실행</span><br><span class="line">bin/elasticsearch</span><br></pre></td></tr></table></figure>
<p>  <code>http://server-url:9200</code>접근시 아래처럼 나오면 설치 성공</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"name"</span>: <span class="string">"node-1"</span>,</span><br><span class="line">	<span class="attr">"cluster_name"</span>: <span class="string">"elasticsearch"</span>,</span><br><span class="line">	<span class="attr">"cluster_uuid"</span>: <span class="string">"---"</span>,</span><br><span class="line">	<span class="attr">"version"</span>: &#123;</span><br><span class="line">		<span class="attr">"number"</span>: <span class="string">"7.3.1"</span>,</span><br><span class="line">		~~~</span><br><span class="line">	&#125;,</span><br><span class="line">	"tagline": "You Know, for Search"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Kibana</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 다운을 받고 </span><br><span class="line">wget https://artifacts.elastic.co/downloads/kibana/kibana-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">// 압축을 푼 다음</span><br><span class="line">tar -zxvf kibana-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">cd kibana-7.3.1-linux-x86_64/config</span><br><span class="line">   // 각종 설정후</span><br><span class="line">   vi kibana.yml</span><br><span class="line">	server.host: &quot;~.~.~.~&quot;</span><br><span class="line">	elasticsearch.hosts: [&quot;http://~.~.~.~:9200&quot;]</span><br><span class="line">// 실행</span><br><span class="line">bin/kibana</span><br></pre></td></tr></table></figure>
<p>  <code>http://server-url:5601</code>접근시 키바나 화면이 나오면 설치 성공</p>
</li>
<li><p>Packetbeat</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 다운을 받고</span><br><span class="line">wget https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">// 압축을 푼 다음</span><br><span class="line">tar -zxvf packetbeat-7.3.1-linux-x86_64.tar.gz</span><br><span class="line">// 각종 설정후 실행 (root 권한으로 실행해야 함)</span><br><span class="line">sudo chown root:root packetbeat.yml</span><br><span class="line">sudo vi packetbeat.yml</span><br><span class="line">	output.elasticsearch:</span><br><span class="line">	  # Array of hosts to connect to.</span><br><span class="line">	  hosts: [&quot;~.~.~.~:9200&quot;]</span><br><span class="line">sudo ./packetbeat -e -c packetbeat.yml</span><br></pre></td></tr></table></figure>
<p>  이렇게 하고나서 키바나에 가보면 아래처럼 Packetbeat 인덱스 패턴을 만들수 있고 수집이 되고있는것 까지 확인 가능하다.</p>
  <div class="figure center" style="width:;"><a class="fancybox" href="packetbeat_es_kibana.jpg" title="데이터가 엄~청 다양하고 많이 수집된다." data-caption="데이터가 엄~청 다양하고 많이 수집된다." data-fancybox="default"><img class="fig-img" src="packetbeat_es_kibana.jpg" alt="데이터가 엄~청 다양하고 많이 수집된다."><span class="image-caption">데이터가 엄~청 다양하고 많이 수집된다.</span></a><span class="caption">데이터가 엄~청 다양하고 많이 수집된다.</span></div>
</li>
</ul>
<h3 id="무엇을-모니터링-할-수-있을까"><a href="#무엇을-모니터링-할-수-있을까" class="headerlink" title="# 무엇을 모니터링 할 수 있을까?"></a># 무엇을 모니터링 할 수 있을까?</h3><p>이제 각종 구성은 했으니 처음에 목표한 <code>어느 rss가 가장 느린가</code>를 체크해 볼 시간이다. python 스크립트를 돌리면 packetbeat 에 의해 네트워크 트래픽이 수집~분석~Elasticsearch에 인덱싱이 되고 이를 키바나의 비쥬얼라이즈를 통해 적절하게 만들어보면 아래처럼 너무나도 간단하게 어느 rss의 응답속도가 가장 느린지 확인할 수 있다. <code>event.duration</code> 필드는 기본적으로 nano second 이다보니 아래 그림에서는 2.6초가 가장 오래걸린 rss url 이라 볼 수 있다.<br><div class="figure center" style="width:;"><a class="fancybox" href="visualize.jpg" title="보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)" data-caption="보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)" data-fancybox="default"><img class="fig-img" src="visualize.jpg" alt="보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)"><span class="image-caption">보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)</span></a><span class="caption">보라, 키바나의 강력한 비쥬얼라이즈 기능을! (아 눈부셔)</span></div></p>
<p>한가지 더, packetbeat를 설치하고 기본 설정으로 실행하게 되면 불필요한(outbound 트래픽만을 수집하겠다던 목표와는 무관한) 데이터들도 수집되다보니 아무래도 cpu에 불필요한 부하가 발생할수 있고(아무래도 모든 네트워크 트래픽을 트래킹 하고 분석해야하니…) Elasticsearch 에도 불필요한 데이터가 인덱싱 되곤 한다. 그래서 지금의 Packetbeat 뿐만 아니라 오픈소스를 사용할 경우엔 설정값들을 정확히 알고 목적에 맞는 커스터마이징은 필수인듯 하다. 필자는 http의 outbound 트래픽만을 보고 싶었기 때문에 아래처럼 packetbeat 설정을 하고 다시 실행 해보면 Elasticsearch 에 수집되는 도큐먼트 사이즈가 확연하게 차이나는 것을 확인할 수 있다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">packetbeat.protocols: # 아래 2개 이외에는 전부 주석처리</span><br><span class="line">- type: http</span><br><span class="line">  ports: [80] # 80 port 의 http를 수집하겠다.</span><br><span class="line">- type: tls</span><br><span class="line">  ports:</span><br><span class="line">     - 443   # 443 의 tls를 수집하겠다.</span><br><span class="line"></span><br><span class="line">processors:</span><br><span class="line">  - drop_event.when.equals.network.direction : &quot;inbound&quot; # inbound는 수집하지 않겠다.</span><br></pre></td></tr></table></figure></p>
<div class="figure center" style="width:;"><a class="fancybox" href="packetbeat_config.jpg" title="좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태" data-caption="좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태" data-fancybox="default"><img class="fig-img" src="packetbeat_config.jpg" alt="좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태"><span class="image-caption">좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태</span></a><span class="caption">좌측이 기본, 우측이 불필요 데이터 제외하고 나서의 수집 상태</span></div>
<p>사실 위 설정값은 <a href="https://www.facebook.com/groups/elasticsearch.kr/permalink/2384124035006756/" target="_blank" rel="noopener">페이스북 한국 Elasticsearch 유저그룹</a>에 문의해서 알게된 내용이다. 역시 커뮤니티 파워, 집단지성의 힘을 다시한번 느낄 수 있었다. (모르면 물어보자! + 문제에 대해 좀더 잘 검색하도록 노력하자!)</p>
<h3 id="마치며"><a href="#마치며" class="headerlink" title="# 마치며"></a># 마치며</h3><p>Packetbeat 을 사용하면서 가장 좋았던 점은 기존 로직과는 전혀 무관하게 작동하는 점이 가장 좋았다. 이러한 점은 어느 상황에서도 서비스 코드 디펜던시가 없어 자유롭게 활용이 가능하다는 뜻으로 해석을 해보곤 한다.<br><div class="figure center" style="width:;"><a class="fancybox" href="angry.jpg" title="마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고<br>이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4" data-caption="마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고<br>이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4" data-fancybox="default"><img class="fig-img" src="angry.jpg" alt="마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고<br>이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4"><span class="image-caption">마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고<br>이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4</span></a><span class="caption">마냥 좋다고 운영환경에 무작정 도입하면 이런 따사로운 눈빛을 받을 수 있으니 참고<br>이미지 출처 : https://namu.wiki/w/%EB%82%98%EB%8A%94%20%EC%9E%90%EC%97%B0%EC%9D%B8%EC%9D%B4%EB%8B%A4</span></div><br>필자는 최근 운영환경에도 packetbeat를 적용해서 outbound 트래픽을 모니터링 하고 문제가 있는 엔드포인트에 대해 자동으로 점검을 하는 시스템을 만들려고 하고 있는데, 네트워크 패킷을 전부 까보며(?) 아무래도 cpu 성능에 지장을 줄수밖에 없는 오픈소스 모듈이다보니 다양한 테스트를 통해 서비스 운영에 영향이 없도록 설정값들을 튜닝해 가며 적용해봐야 할 것 같다. (무작정 좋다고 적용하다 오히려 큰 화를 부를 수 있다…)</p>
<p>내가 맛있어 하는 음식이 남들도 맛있으리란 법 없듯, 소개팅에 나가기전 준비한 멘트가 전부 먹히리라는 법 없듯…<br>모든 상황에는 튜닝은 필수다. 그 튜닝을 얼마나 잘, 그리고 센스있게 하냐가 포인트!<br><br><br></p>

            

        </div>
    </div>
    <style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#000000 !important;background-color:#FFDD00 !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 1px 9px !important;font-size: 22px !important;letter-spacing: 0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#000000 !important;}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"><center><br><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/taetaetae"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span></a>
    <a href="https://qr.kakaopay.com/281006011000029652324500" target="_blank"><img src="https://i.imgur.com/peaYpjh.png" style="height: 28px;"></a>
    </center>
    <div id="post-footer" class="post-footer main-content-wrap">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5788330009690816"
     data-ad-slot="9180895229"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/network/">network</a> <a class="tag tag--primary tag--small t-link" href="/tags/packetbeat/">packetbeat</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/09/29/woowabros-spring-batch/" data-tooltip="우아한 스프링 배치 테크세미나 정리 및 후기 (by 우아한 형제들)" aria-label="PREVIOUS: 우아한 스프링 배치 테크세미나 정리 및 후기 (by 우아한 형제들)">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/08/04/apache-load-balancing/" data-tooltip="아파치 로드밸런싱으로 여러 WAS 운영하기" aria-label="NEXT: 아파치 로드밸런싱으로 여러 WAS 운영하기">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Google+">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                
        <!--  utteranc comment -->
        
        <script src="https://utteranc.es/client.js"
                repo="taetaetae/blog-comment"
                issue-term="pathname"
                label="Comment"
                theme="github-light"
                crossorigin="anonymous"
                async>
        </script>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 taetaetae. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/09/29/woowabros-spring-batch/" data-tooltip="우아한 스프링 배치 테크세미나 정리 및 후기 (by 우아한 형제들)" aria-label="PREVIOUS: 우아한 스프링 배치 테크세미나 정리 및 후기 (by 우아한 형제들)">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/08/04/apache-load-balancing/" data-tooltip="아파치 로드밸런싱으로 여러 WAS 운영하기" aria-label="NEXT: 아파치 로드밸런싱으로 여러 WAS 운영하기">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/" title="Share on Google+">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="5">
    <i id="btn-close-shareoptions" class="fa fa-times"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/">
                    <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/">
                    <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://taetaetae.github.io/2019/09/08/network-monitor-by-packetbeat/">
                    <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">taetaetae</h4>
        
            <div id="about-card-bio"><p>Programmer</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Naver Corp.</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover_2.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
